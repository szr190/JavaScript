<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>hello world~!!</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
    <style>
    *{margin: 0;padding: 0;}
    .clearfix:after{content:'';display:block;clear:both;}
    .fl{float:left;}
    .fr{float:right;}
    #box{
        width:100px;
        height:100px;
        background: green;
        position: absolute;
        left:0px;


    }


    </style>
</head>
<body>
    <div id="box">

    </div>

</body>
    <script>
        /*
            requestAnimationFrame() 请求动画
                每次请求一次
            cancelAnimationFrame(timer) 删除动画
        */
        var oBox = document.getElementById('box');


        animation(oBox,'left','800px',1000);

        function animation(obj,attr,targ,dur){
            //
            targ = parseFloat(targ);//转化为数字类型，并去掉单位;
            var init = parseFloat( getStyle(obj,attr) );//获取初始值
            var init_t = new Date();//获取初始时间

            (function run(){
                  var run_t = new Date()-init_t;//动画执行时长
                  var prop = run_t/dur;//动画执行时长与动画预计总时间的比例
                  if(prop>=1){
                    prop=1;
                  }else{
                    window.requestAnimationFrame(run);
                  }
                  var val = (targ-init)*prop;//当前路程

                  var unit='';
                  if(attr=='opacity'){

                  }else{
                     unit = 'px';
                  }
                  obj.style[attr]= init + val+unit;//开始位置加移动位置


            })()

        }

        function getStyle(obj,attr){
            return window.getComputedStyle?window.getComputedStyle(obj)[attr]:obj.currentStyle[attr];
        }








    </script>
</html>
